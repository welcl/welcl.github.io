<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="前言:webpack(3.x-4.x)学习1.安装webpack首先我们创建一个目录，初始化 npm，然后 在本地安装 webpack，(这里不推荐全局安装,全局安装会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败)。创建一个工程目录:比如webpack-test然后进入webpack-test中1.npm init //此时文件目">
<meta property="og:type" content="article">
<meta property="og:title" content="&#39;webpack&#39;">
<meta property="og:url" content="http://yoursite.com/2018/07/12/webpack/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="前言:webpack(3.x-4.x)学习1.安装webpack首先我们创建一个目录，初始化 npm，然后 在本地安装 webpack，(这里不推荐全局安装,全局安装会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败)。创建一个工程目录:比如webpack-test然后进入webpack-test中1.npm init //此时文件目">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/25.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/26.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/10.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/27.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/6.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/5.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/7.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/8.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/9.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/11.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/12.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/13.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/14.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/16.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/17.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/15.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/18.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/19.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/20.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/21.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/22.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/23.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/29.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/24.png">
<meta property="og:image" content="http://yoursite.com/2018/07/12/webpack/30.png">
<meta property="og:updated_time" content="2018-07-12T11:00:35.756Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="&#39;webpack&#39;">
<meta name="twitter:description" content="前言:webpack(3.x-4.x)学习1.安装webpack首先我们创建一个目录，初始化 npm，然后 在本地安装 webpack，(这里不推荐全局安装,全局安装会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败)。创建一个工程目录:比如webpack-test然后进入webpack-test中1.npm init //此时文件目">
<meta name="twitter:image" content="http://yoursite.com/2018/07/12/webpack/25.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/07/12/webpack/"/>





  <title>'webpack' | Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/12/webpack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">'webpack'</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-12T17:56:36+08:00">
                2018-07-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="前言-webpack-3-x-4-x-学习"><a href="#前言-webpack-3-x-4-x-学习" class="headerlink" title="前言:webpack(3.x-4.x)学习"></a>前言:webpack(3.x-4.x)学习</h1><h2 id="1-安装webpack"><a href="#1-安装webpack" class="headerlink" title="1.安装webpack"></a>1.安装webpack</h2><p>首先我们创建一个目录，初始化 npm，然后 在本地安装 webpack，(这里不推荐全局安装,全局安装会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败)。创建一个工程目录:比如webpack-test然后进入webpack-test中<br>1.npm init //此时文件目录下生成一个package.json用于保存项目的信息<br>2.npm install webpack –save-dev//此时生成一个node_modules文件<br>    如果你使用 webpack 4+ 版本，你还需要安装 CLI。<br>    npm install –save-dev webpack-cli<br>    (webpack@version是安装指定webpack版本也可以在package.json的devDependencies中更改webpack版本号,然后npm     install安装指定版本)<br>3.在webpack-test目录下新建一个src/index.js文件,用于webpack的入口,然后运行webpack –mode –development 或者 webpack –mode –production  这时就会生成dist/main.js文件,为了方便操作,我们可以在package.json的script中写入<br>    “dev”:”webpack –mode development”,<br>    “build”:”webpack –mode production”<br>    以后我们只需要在命令行执行 npm run dev<br>    相当于执行webpack –mode development，执行npm run dev相当于执行webpack –mode production,<br>4.使用一个配置文件:(webpack.config.js)<br>    在 webpack 4中，可以无须任何配置使用，然而大多数项目会需要很复杂的设置，这就是为什么 webpack 仍然要支持 配置文件。这比在终端(terminal)中手动输入大量命令要高效的多，所以让我们创建一个配置文件</p>
<h2 id="管理资源"><a href="#管理资源" class="headerlink" title="管理资源"></a>管理资源</h2><h3 id="1-加载css文件"><a href="#1-加载css文件" class="headerlink" title="1.加载css文件:"></a>1.加载css文件:</h3><pre><code>为了从JavaScript模块中import 一个 CSS 文件你需要在 module配置中安装并添加style-loader(对路径进行处理)和 css-loader(对css进行处理)
在命令行安装:
npm install --save-dev style-loader css-loader
在src/index.js文件中引用,
</code></pre><p><img src="/2018/07/12/webpack/25.png" alt="Alt text"><br>    在webpack.config.js中引入css配置然后启动服务即可<br><img src="/2018/07/12/webpack/26.png" alt="Alt text"></p>
<h3 id="2-加载less文件"><a href="#2-加载less文件" class="headerlink" title="2.加载less文件"></a>2.加载less文件</h3><pre><code>在开发中less的使用不可获缺,那么该如何配置less文件呢,
首先需要安装less和less-loadercnpm install less less-loader --save-dev,然后在引入less文件,就可以了,
那么如何把less从js中分离出来呢?在webpack.config.js的module模块中配置
</code></pre><p><img src="/2018/07/12/webpack/10.png" alt="Alt text"></p>
<h3 id="3-加载sass文件-注意sass文件以-scss结尾"><a href="#3-加载sass文件-注意sass文件以-scss结尾" class="headerlink" title="3.加载sass文件(注意sass文件以.scss结尾)"></a>3.加载sass文件(注意sass文件以.scss结尾)</h3><p>   sass的加载和less几乎一模一样就是在安装sass时需要 cnpm install node-sass sass-loader –save-dev,然后引入sass文件!sass分离出来和less一样把test:/\.scss$/即可</p>
<h3 id="4-加载图片文件"><a href="#4-加载图片文件" class="headerlink" title="4.加载图片文件"></a>4.加载图片文件</h3><pre><code>加载图片是需要安装 cnpm install file-loader url-loader --save-dev, file-loader是是打包图片到webpack照片中,url-loader是配置limit的,当图片比这个值大的时候就在显示dist里,比这个值小就转成base64写到js代码里,url-loader自带了file-loader功能,且不依赖file-loader所以这里只写了url-loader
</code></pre><p><img src="/2018/07/12/webpack/27.png" alt="Alt text"><br>    但是,当图片大于limit值得时候,图片生成在dist目录下,没有加载到js文件中,所以这时候图片的路径又会出错,这时候就需要使用绝对路径来处理图片(publicPath)<br><img src="/2018/07/12/webpack/6.png" alt="Alt text"><br><img src="/2018/07/12/webpack/5.png" alt="Alt text"><br>    如果我们在html页面中写入&lt;\img src=”xxx.jpg”&gt;时,webpack不会打包html中的img标签,这个时候需要使用html-withimg-loader插件来解决这个问题<br>    首先cnpm install html-withimg-loader –save-dev ,然后<br><img src="/2018/07/12/webpack/7.png" alt="Alt text"><br>    有的时候我们需要css和js分离,虽然webpack并不希望我们这么做,我们可以使用extract-text-webpack-plugin插件来实现css和js分离有的时候我们需要css和js分离,虽然webpack并不希望我们这么做,我们可以使用extract-text-webpack-plugin插件来实现css和js分离<br>    首先 cnpm install extract-text-webpack-plugin –save-dev, 然后在webpack.config.js中引入const ExtractWebpackPlugin = require(‘extract-text-webpack-plugin’);//把css文件从js中分离出来(webpack4.0后这个插件的版本也要对应上( “extract-text-webpack-plugin”: “^4.0.0-beta.0”,)),在module的rules中<br><img src="/2018/07/12/webpack/8.png" alt="Alt text"><br>    在plugins中<br><img src="/2018/07/12/webpack/9.png" alt="Alt text"><br>    cnpm install –save-dev postcss-loader autoprefixer</p>
<h3 id="5-消除未使用的css-purifycss-webpack插件"><a href="#5-消除未使用的css-purifycss-webpack插件" class="headerlink" title="5.消除未使用的css(purifycss-webpack插件)"></a>5.消除未使用的css(purifycss-webpack插件)</h3><pre><code>安装插件:cnpm i -D purifycss-webpack purify-css(等同于cnpm install -save-dev purifycss-webpack purify-css),然后引入插件和全局的glob,在plugins中指定消除页面的路径
</code></pre><p><img src="/2018/07/12/webpack/11.png" alt="Alt text"><br><img src="/2018/07/12/webpack/12.png" alt="Alt text"></p>
<h3 id="6-给webpack增加babel支持"><a href="#6-给webpack增加babel支持" class="headerlink" title="6.给webpack增加babel支持"></a>6.给webpack增加babel支持</h3><pre><code>Babel其实是一个编译JavaScript的平台，它的强大之处表现在可以通过编译帮你达到以下目的：
1.使用下一代的javaScript代码(ES6,ES7….)，即使这些标准目前并未被当前的浏览器完全支持。
2.使用基于JavaScript进行了扩展的语言，比如React的JSX
babel的安装与配置:
Babel其实是几个模块化的包，其核心功能位于称为babel-core的npm包中，webpack可以把其不同的包整合在一起使用，对于每一个你需要的功能或拓展，你都需要安装单独的包（用得最多的是解析ES6的babel-preset-es2015包和解析JSX的babel-preset-react包）。
安装:cnpm install --save-dev babel-core babel-loader babel-preset-es2015 babel-preset-react
配置:.babelrc
</code></pre><p><img src="/2018/07/12/webpack/13.png" alt="Alt text"><br>    虽然Babel可以直接在webpack.config.js中进行配置，但是考虑到babel具有非常多的配置选项，如果写在webapck.config.js中会非常的雍长不可阅读，所以我们经常把配置写在.babelrc文件里。在项目根目录新建.babelrc文件，并把配置写到文件里<br><img src="/2018/07/12/webpack/14.png" alt="Alt text"><br>    ENV:<br>    现在网络上已经不流行babel-preset-es2015，现在官方推荐使用的是babel-preset-env,那我们为了紧跟潮流，说下env的配置方法.<br>    安装:cnpm install –save-dev babel-preset-env<br>    .babelrc中的内容改为{“presets”:[“react”,”env”}<br>    总结：在实际工作中还是要安装Babel的，这样能更好的兼容每种浏览器，而把Babel的配置文件分解出来是最好的选择。</p>
<h3 id="7-打包后如何调试"><a href="#7-打包后如何调试" class="headerlink" title="7.打包后如何调试"></a>7.打包后如何调试</h3><pre><code>在使用webpack时只要通过简单的devtool配置，webapck就会自动给我们生产source maps 文件，map文件是一种对应编译文件和源文件的方法，让我们调试起来更简单。
四种选项:在配置devtool时，webpack给我们提供了四种选项。
1.source-map:在一个单独文件中产生一个完整且功能完全的文件。这个文件具有最好的source map,但是它会减慢打包速度；
2.cheap-module-source-map:在一个单独的文件中产生一个不带列映射的map，不带列映射提高了打包速度，但是也使得浏览器开发者工具只能对应到具体的行，不能对应到具体的列（符号）,会对调试造成不便。 
3.eval-source-map:使用eval打包源文件模块，在同一个文件中生产干净的完整版的sourcemap，但是对打包后输出的JS文件的执行具有性能和安全的隐患。在开发阶段这是一个非常好的选项，在生产阶段则一定要不开启这个选项。
4.cheap-module-eval-source-map:这是在打包文件时最快的生产source map的方法，生产的 Source map 会和打包后的JavaScript文件同行显示，没有影射列，和eval-source-map选项具有相似的缺点。
四种打包模式，有上到下打包速度越来越快，不过同时也具有越来越多的负面作用，较快的打包速度的后果就是对执行和调试有一定的影响。
</code></pre><h3 id="8-实战技巧-开发和生产并行设置"><a href="#8-实战技巧-开发和生产并行设置" class="headerlink" title="8.实战技巧:开发和生产并行设置"></a>8.实战技巧:开发和生产并行设置</h3><pre><code>依赖不同:
一个项目中是有开发环境和生产环境的，这两个环境的依赖也是不同的。
开发依赖：只在开发中用来帮助你进行开发，简化代码或者生成兼容设置的依赖包。你可以打开package.json来查看，devDependencies的下面的这些包为开发使用的包。这些包在生产环境中并没有用处。
生产依赖：就是比如我们的js使用了jquery，jquery的程序要在浏览器端起作用，也就是说我们最终的程序也需要这个包，这就是生产依赖。这些包在dependencies中。
在windows下的配置:
首先在webpack.config.js中
</code></pre><p><img src="/2018/07/12/webpack/16.png" alt="Alt text"><br>    其次在package.json中设置<br><img src="/2018/07/12/webpack/17.png" alt="Alt text"><br><img src="/2018/07/12/webpack/15.png" alt="Alt text"><br>    最后在cmd中npm run dev或者npm run build就可以看到在开发或者生产环境中运行了.</p>
<h3 id="9-实战技巧-webpack模块化配置"><a href="#9-实战技巧-webpack模块化配置" class="headerlink" title="9.实战技巧:webpack模块化配置"></a>9.实战技巧:webpack模块化配置</h3><pre><code>现在的前端开发随着ES6的普及已经大面积使用模块化进行开发了，在webpack.config.js配置文件中也要使用到模块化配置,这里只举了一个简单的例子,把entry入口进行模块化配置.
首先在根目录下新建一个webpack_config文件夹,在该文件夹下把entry_webpack.js写入
</code></pre><p><img src="/2018/07/12/webpack/18.png" alt="Alt text"><br>    然后在webpack.config.js中导入该模块,(注意在webpack.config.js中只能用require来导入,用import会报错,)<br>    //引入模块化后的entry模块<br>    const entry=require(‘./webpack_config/entry_webpack.js’);<br><img src="/2018/07/12/webpack/19.png" alt="Alt text"><br>    最后你可以再次使用npm run dev 进行测试，你会发现模块化成功了。<br>    总结：模块化在实际工作中是必不可少的操作.需要多练习!</p>
<h3 id="10-实战技巧-优雅打包第三方类库-jquery-vue-react等"><a href="#10-实战技巧-优雅打包第三方类库-jquery-vue-react等" class="headerlink" title="10.实战技巧:优雅打包第三方类库(jquery,vue,react等)"></a>10.实战技巧:优雅打包第三方类库(jquery,vue,react等)</h3><pre><code>我们以引入jquery为例:
安装JQuery: cnpm install --save jquery(因为是在生产环境中,所以用save,在开发环境用--save-dev)
第一种方法:在js文件中引用: 
</code></pre><p><img src="/2018/07/12/webpack/20.png" alt="Alt text"><br>    第二种方法:用plugin引入<br>    如果你觉的上面的方法和webpack没什么关系，只是普通的引入，webpack只是负责了一下打包，这样并没有全局感。那再学习一种在webapck.config.js中配置的方法，这种不需要你在入口文件中引入，而是webpack给你作了全局引入。这个插件就是ProvidePlugin。<br>    ProvidePlugin是一个webpack自带的插件，Provide的意思就是装备、提供。因为ProvidePlugin是webpack自带的插件，所以要先再webpack.config.js中引入webpack。<br>    const webpack = require(‘webpack’);<br>    然后在plugins中引入:<br><img src="/2018/07/12/webpack/21.png" alt="Alt text"><br>    配置好后，就可以在你的入口文件中使用了，而不用再次引入了。这是一种全局的引入，在实际工作中也可以很好的规范项目所使用的第三方库。<br>    总结：每一个项目都可能引入第三方类库，而像Vue和Angular这样的成熟框架都推出了自己的webpack框架，比如vue-cli。但是很多情况还是需要我们手动更改这些配置好的webpack来适用于我们的公司项目.</p>
<h3 id="11-实战技巧-watch的正确使用方法"><a href="#11-实战技巧-watch的正确使用方法" class="headerlink" title="11.实战技巧:watch的正确使用方法"></a>11.实战技巧:watch的正确使用方法</h3><pre><code>在初级开发阶段，使用webpack-dev-server就可以充当服务器和完成打包任务，但时随着你项目的进一步完成，可能需要前后台联调或者两个前端合并代码时，就需要一个公共的服务器了。这时候我们每次保存后手动打包显然效率太低，我们希望的场景是代码发生变化后，只要保存，webpack自动为我们进行打包。这个工具就是watch，这节课我们把wacht完全学会，你会发现在开发中更加的得心应手。
watch的配置:
很多小伙伴认为–watch直接使用就可以，并没有什么需要讲的。其实这只是初级的用法，但是在学习一种技术时，我们必须要做到了解全部，也就是常说的知其然知其所以然。我们看下面的配置代码，我在代码中已经做出了解释。
</code></pre><p><img src="/2018/07/12/webpack/22.png" alt="Alt text"><br>    上边的每一行配置我都作了说明，有时候你在没配置的情况下，直接用webpack –watch是不起作用的，这时候你需要进行配置这些选项<br>    配置好后，我们就可以痛快的使用watch了，在大型项目中，这大大加快了我们的开发效率，不用反复的手动打包了<br>    BannerPlugin插件:<br>    讲一个工作中的小技巧，在工作中每个人写的代码都要写上备注，为的就是在发生问题时可以找到当时写代码的人。有时候也用于版权声明。<br>    这个插件就是BannerPlugin，我们使用后会在JS中加上我们的版权或开发者声明。<br>    需要注意的是在使用这个插件之前必须引入webpack。<br>    const webpack = require(‘webpack’);<br>    在webpack.config.js中写入:<br><img src="/2018/07/12/webpack/23.png" alt="Alt text"><br>    这时在dist目录下的js已经加上了版权声明。<br><img src="/2018/07/12/webpack/29.png" alt="Alt text"></p>
<h3 id="12-实战技巧-webpack优化黑技能-抽离第三方类库-jquery-vue等"><a href="#12-实战技巧-webpack优化黑技能-抽离第三方类库-jquery-vue等" class="headerlink" title="12.实战技巧:webpack优化黑技能(抽离第三方类库(jquery,vue等))"></a>12.实战技巧:webpack优化黑技能(抽离第三方类库(jquery,vue等))</h3><pre><code>作为一个程序员，无论是写什么程序都i要有一颗不断优化的心。webpack在优化这条路上，也为我们作了很多配置，这节课我们就看看工作中常用的webpack优化黑技能。
</code></pre><h3 id="1-ProvidePlugin和import"><a href="#1-ProvidePlugin和import" class="headerlink" title="1.ProvidePlugin和import:"></a>1.ProvidePlugin和import:</h3><pre><code>在上面学习了如何引入第三方类库，并引入了jquery，在引用JQuery时我们用了两种方法，第一种时import，第二种时使用ProvidePlugin插件。那两种引入方法有什么区别那?
import引入方法：引用后不管你在代码中使用不适用该类库，都会把该类库打包起来，这样有时就会让代码产生冗余
ProvidePlugin引入方法：引用后只有在类库使用时，才按需进行打包，所以建议在工作使用插件的方式进行引入。
具体的对比操作,你会看出两种引入方法的对比打包结果。差距还是蛮大的
</code></pre><h3 id="2-抽离JQuery"><a href="#2-抽离JQuery" class="headerlink" title="2.抽离JQuery"></a>2.抽离JQuery</h3><pre><code>上边的方法只是优化的第一步，工作中你会发现，不适用的类库几乎我们也不会引入，所以上边只是一个必要操作的第一步。那往往把第三方类库抽离出来，才是最好的解决方法。
第一步：修改入口文件
抽离的第一步是修改入口文件，把我们的JQuery也加入到入口文件中，看下面的代码。
webpack.config.js
</code></pre><p><img src="/2018/07/12/webpack/24.png" alt="Alt text"></p>
<h3 id="3-多个第三方类库抽离"><a href="#3-多个第三方类库抽离" class="headerlink" title="3.多个第三方类库抽离"></a>3.多个第三方类库抽离</h3><pre><code>会了如何抽离Jquery，但是在实际开发中，我们会引用不止一个第三方类库，这时也需要抽离。我们拿引入Vue为例，看看如何抽离出来。
第一步:我们先用npm 进行安装。npm instawll vue --save
注意这里是–save，而不是–save-dev。因为这个类库在生产环境中也是要使用的。
第二步：在入口配置中引入vue和jquery
entry:{
    entry:&apos;./src/entry.js&apos;,
    jquery:&apos;jquery&apos;,
    vue:&apos;vue&apos;
},
只是多比上边多加了一个vue选项。
第三步：修改CommonsChunkPlugin配置
需要修改两个位置：
    1.第一个是在name属性里把原来的字符串改为数组，因为我们要引入多个模块，所以是数组；
    2.第二个是在filename属性中把我们输出的文件名改为匹配付[name],这项操作就是打包出来的名字跟随我们打包前的模块。
下面是我们修改的代码，你可以跟jquery抽离时对比一下。
new webpack.optimize.CommonsChunkPlugin({ 
  //name对应入口文件中的名字，我们起的是jQuery   
   name:[&apos;jquery&apos;,&apos;vue&apos;],    //把文件打包到哪里，是一个路径   
   filename:&quot;assets/js/[name].js&quot;,    //最小打包的文件模块数，这里直接写2就好    
   minChunks:2
   }),
配置好后，我们就可以在控制台输入webpack进行打包了。你会看到我们预想的结果，jquery和vue都被我们抽离出来了
总结：在项目开发中，我们很使用很多第三方类库，那好的做法就是把第三方这些类库全部抽离处理，这样在项目维护和性能上都是不错的选择。希望学会这个技巧后，你也能在工作中使用上。
但是在webpack4.x中webpack.optimize.CommonsChunkPlugin已经被删除了,取而代之的是optimization.splitChunks(具体用法参考webpack官方文档)
</code></pre><p><img src="/2018/07/12/webpack/30.png" alt="Alt text"></p>
<h3 id="13-实战技巧-静态资源集中输出"><a href="#13-实战技巧-静态资源集中输出" class="headerlink" title="13.实战技巧:静态资源集中输出"></a>13.实战技巧:静态资源集中输出</h3><pre><code>工作中会有一些已经存在但在项目中没有引用的图片资源或者其他静态资源（比如设计图、开发文档），这些静态资源有可能是文档，也有可能是一些额外的图片。项目组长会要求你打包时保留这些静态资源，直接打包到制定文件夹。其实打包这些资源只需要用到copy-webpack-plugin。
使用copy-webpack-plugin:
copy-webpack-plugin就是专门为我们作静态资源转移的插件，不过它不同上两节使用的插件，它是需要安装的。
插件安装:cnpm install --save-dev copy-webpack-plugin
引入插件:安装好后，需要在webpack.config.js文件的头部引入这个插件才可以使用。
const copyWebpackPlugin= require(&quot;copy-webpack-plugin&quot;);
配置插件:引入之后我们就可以在plugins里边进行配置插件了，我们先看下面的插件配置代码，然后再进行详细讲解。
    new copyWebpackPlugin([{
        from:__dirname+&apos;/src/public&apos;,
        to:&apos;./public&apos;
    }])
from:要打包的静态资源目录地址，这里的__dirname是指项目目录下，是node的一种语法，可以直接定位到本机的项目目录中。
to:要打包到的文件夹路径，跟随output配置中的目录。所以不需要再自己加__dirname
配置好后，我们就可以使用webpack 进行打包了，你会发现图片按照我们的配置打包了过去。
</code></pre><h3 id="14-实战技巧-json配置文件的引用"><a href="#14-实战技巧-json配置文件的引用" class="headerlink" title="14.实战技巧:json配置文件的引用"></a>14.实战技巧:json配置文件的引用</h3><pre><code>在实际工作中，我们的项目都会配置一个Json的文件或者说API文件，作为项目的配置文件。有时候你也会从后台读取到一个json的文件，这节课就学习如何在webpack环境中使用Json。如果你会webpack1或者webpack2版本中，你是需要加载一个json-loader的loader进来的，但是在webpack3.x版本中，你不再需要另外引入了
读出Json内容:
第一步：现在我们的index.html模板中加入一个层，并给层一个Id，为了是在javascript代码中可以方便引用。
&lt;div id=&quot;json&quot;&gt;&lt;/div&gt;
第二步：到src文件夹下，找到入口文件，我这里是entry.js文件。修改里边的代码，如下：
var json =require(&apos;../config.json&apos;);
document.getElementById(&quot;json&quot;).innerHTML= json.name;
这两行代码非常简单，第一行是引入我们的json文件，第二行驶写入到到DOM中。
第三步：启用我们的npm run server 命令就可以在浏览器中看到结果了。

说说热更新:
    其实在webpack3中启用热加载相当的容易，只要加入HotModuleReplacementPlugin这个插件就可以了。
    new webpack.HotModuleReplacementPlugin()
    现在只要你启动 npm run server 后，修改index.html中的内容，浏览器可以自动给我们更新出最新的页面。
    但这里说的热加更新和我们平时写程序的热加载不是一回事，比如说我们Vue或者React中的热更新，并不是刷新整个页面，而是一个局部更新，而这里的更新是重新刷新了页面。
</code></pre>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/22/个人博客搭建/" rel="next" title="个人博客搭建">
                <i class="fa fa-chevron-left"></i> 个人博客搭建
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/13/photoshop/" rel="prev" title="photoshop">
                photoshop <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言-webpack-3-x-4-x-学习"><span class="nav-number">1.</span> <span class="nav-text">前言:webpack(3.x-4.x)学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-安装webpack"><span class="nav-number">1.1.</span> <span class="nav-text">1.安装webpack</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#管理资源"><span class="nav-number">1.2.</span> <span class="nav-text">管理资源</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-加载css文件"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.加载css文件:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-加载less文件"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.加载less文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-加载sass文件-注意sass文件以-scss结尾"><span class="nav-number">1.2.3.</span> <span class="nav-text">3.加载sass文件(注意sass文件以.scss结尾)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-加载图片文件"><span class="nav-number">1.2.4.</span> <span class="nav-text">4.加载图片文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-消除未使用的css-purifycss-webpack插件"><span class="nav-number">1.2.5.</span> <span class="nav-text">5.消除未使用的css(purifycss-webpack插件)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-给webpack增加babel支持"><span class="nav-number">1.2.6.</span> <span class="nav-text">6.给webpack增加babel支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-打包后如何调试"><span class="nav-number">1.2.7.</span> <span class="nav-text">7.打包后如何调试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-实战技巧-开发和生产并行设置"><span class="nav-number">1.2.8.</span> <span class="nav-text">8.实战技巧:开发和生产并行设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-实战技巧-webpack模块化配置"><span class="nav-number">1.2.9.</span> <span class="nav-text">9.实战技巧:webpack模块化配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-实战技巧-优雅打包第三方类库-jquery-vue-react等"><span class="nav-number">1.2.10.</span> <span class="nav-text">10.实战技巧:优雅打包第三方类库(jquery,vue,react等)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-实战技巧-watch的正确使用方法"><span class="nav-number">1.2.11.</span> <span class="nav-text">11.实战技巧:watch的正确使用方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-实战技巧-webpack优化黑技能-抽离第三方类库-jquery-vue等"><span class="nav-number">1.2.12.</span> <span class="nav-text">12.实战技巧:webpack优化黑技能(抽离第三方类库(jquery,vue等))</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-ProvidePlugin和import"><span class="nav-number">1.2.13.</span> <span class="nav-text">1.ProvidePlugin和import:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-抽离JQuery"><span class="nav-number">1.2.14.</span> <span class="nav-text">2.抽离JQuery</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-多个第三方类库抽离"><span class="nav-number">1.2.15.</span> <span class="nav-text">3.多个第三方类库抽离</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-实战技巧-静态资源集中输出"><span class="nav-number">1.2.16.</span> <span class="nav-text">13.实战技巧:静态资源集中输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-实战技巧-json配置文件的引用"><span class="nav-number">1.2.17.</span> <span class="nav-text">14.实战技巧:json配置文件的引用</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
